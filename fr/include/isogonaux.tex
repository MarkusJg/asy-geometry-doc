£~color£builtin`import` geometry; £~color£function-name`size`(10£~color£constant`cm`,0);
£~color£type`triangle` £~color£variable-name`t`=£~color£function-name`triangleabc`(5,6,7); £~color£function-name`draw`(t, £~color£function-name`linewidth`(£~color£constant`bp`));
£~color£type`point` £~color£variable-name`P`=0.5*t.B+0.3*(t.C-t.B); £~color£function-name`dot`(£~color£string`"$P$"`, P, £~color£constant`N`, 0.8*£~color£constant`red`);

£~color£type`point` £~color£variable-name`Q`=£~color£function-name`isogonalconjugate`(t,P); £~color£function-name`dot`(£~color£string`"$Q$"`, Q, £~color£function-name`dir`(-30));
£~color£type`point` £~color£variable-name`Q1`=£~color£function-name`projection`(t.AB)*Q; £~color£type`segment` £~color£variable-name`sq1`=£~color£function-name`segment`(Q,Q1);
£~color£type`point` £~color£variable-name`Q2`=£~color£function-name`projection`(t.BC)*Q; £~color£type`segment` £~color£variable-name`sq2`=£~color£function-name`segment`(Q,Q2);
£~color£type`point` £~color£variable-name`Q3`=£~color£function-name`projection`(t.AC)*Q; £~color£type`segment` £~color£variable-name`sq3`=£~color£function-name`segment`(Q,Q3);
£~color£function-name`draw`(sq1); £~color£function-name`draw`(sq2); £~color£function-name`draw`(sq3);
£~color£function-name`dot`(£~color£string`"$Q_1$"`, Q1, £~color£constant`SE`); £~color£function-name`dot`(£~color£string`"$Q_2$"`, Q2); £~color£function-name`dot`(£~color£string`"$Q_3$"`, Q3, £~color£constant`NW`);

£~color£type`point` £~color£variable-name`P1`=£~color£function-name`projection`(t.AB)*P; £~color£type`segment` £~color£constant`sp`1=£~color£function-name`segment`(P,P1);
£~color£type`point` £~color£variable-name`P2`=£~color£function-name`projection`(t.BC)*P; £~color£type`segment` £~color£constant`sp`2=£~color£function-name`segment`(P,P2);
£~color£type`point` £~color£variable-name`P3`=£~color£function-name`projection`(t.AC)*P; £~color£type`segment` £~color£constant`sp`3=£~color£function-name`segment`(P,P3);
£~color£function-name`draw`(£~color£constant`sp`1, 0.8*£~color£constant`red`); £~color£function-name`draw`(£~color£constant`sp`2, 0.8*£~color£constant`red`); £~color£function-name`draw`(£~color£constant`sp`3, 0.8*£~color£constant`red`);
£~color£function-name`dot`(£~color£string`"$P_1$"`,P1,£~color£constant`SW`,0.8*£~color£constant`red`); £~color£function-name`dot`(£~color£string`"$P_2$"`,P2,0.8*£~color£constant`red`); £~color£function-name`dot`(£~color£string`"$P_3$"`,P3,£~color£constant`NW`,0.8*£~color£constant`red`);

£~color£function-name`perpendicularmark`(t.AB,sq1); £~color£function-name`perpendicularmark`(t.BC,sq2);
£~color£function-name`perpendicularmark`(£~color£function-name`reverse`(t.AC),sq3); £~color£function-name`perpendicularmark`(t.AB,£~color£constant`sp`1, £~color£constant`red`);
£~color£function-name`perpendicularmark`(t.BC,£~color£constant`sp`2, £~color£constant`red`); £~color£function-name`perpendicularmark`(£~color£function-name`reverse`(t.AC),£~color£constant`sp`3, £~color£constant`red`);

£~color£type`circle` £~color£variable-name`C`=£~color£function-name`circle`(Q1,Q2,Q3); £~color£function-name`draw`(C, 0.8*£~color£constant`blue`);
£~color£function-name`draw`(£~color£function-name`segment`(Q,P), 0.8*£~color£constant`blue`, £~color£function-name`StickIntervalMarker`(2,2, 0.8*£~color£constant`blue`));
£~color£function-name`dot`(£~color£string`"$C$"`, C.C, £~color£constant`S`, 0.8*£~color£constant`blue`);
