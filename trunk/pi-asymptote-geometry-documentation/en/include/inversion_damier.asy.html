<span class="builtin">import</span> geometry;
<span class="function-name">size</span>(10<span class="constant">cm</span>,0);
<span class="type">int</span> <span class="variable-name">n</span>=12; <span class="type">segment</span>[] <span class="constant">S</span>;
<span class="type">inversion</span> <span class="variable-name">inv</span>=<span class="function-name">inversion</span>(1,(n/2+0.45,n/2+0.45));
<span class="type">transform</span> <span class="variable-name">tv</span>=<span class="function-name">shift</span>(0,1), <span class="variable-name">th</span>=<span class="function-name">shift</span>(1,0);
<span class="builtin">for</span> (<span class="type">int</span> <span class="variable-name">i</span>=0; i &lt; n; ++i)
  <span class="builtin">for</span> (<span class="type">int</span> <span class="variable-name">j</span>=0; j &lt; n; ++j) {
    <span class="builtin">for</span> (<span class="type">int</span> <span class="variable-name">l</span>=0; l &lt; 4 ; ++l)
      <span class="constant">S</span>[l]=<span class="function-name">segment</span>(<span class="function-name">point</span>(tv^i*th^j*<span class="constant">unitsquare</span>,l), <span class="function-name">point</span>(tv^i*th^j*<span class="constant">unitsquare</span>,(l+1)%4));
    <span class="type">path</span> <span class="variable-name">g</span>;
    <span class="builtin">for</span> (<span class="type">int</span> <span class="variable-name">l</span>=0; l &lt; 4; ++l) g=g--(<span class="type">path</span>)(inv*<span class="constant">S</span>[l]);
    g=g--<span class="builtin">cycle</span>;
    <span class="keyword">if</span>((i+j)%2 == 0)  <span class="function-name">draw</span>(g); <span class="builtin">else</span> <span class="function-name">fill</span>(g);
  }

