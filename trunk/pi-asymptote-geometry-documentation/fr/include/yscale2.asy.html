<span class="builtin">import</span> geometry;
<span class="function-name">size</span>(6<span class="constant">cm</span>,0);
<span class="constant">currentcoordsys</span>=<span class="function-name">cartesiansystem</span>((2,1), i=(1,0.5), j=(-0.75,1));
<span class="function-name">show</span>(<span class="constant">currentcoordsys</span>, ipen=<span class="constant">blue</span>, jpen=<span class="constant">red</span>, xpen=<span class="constant">invisible</span>);

<span class="type">real</span> <span class="variable-name">k</span>=<span class="function-name">sqrt</span>(2);
<span class="type">point</span> <span class="variable-name">A</span>=(2,1);
<span class="type">point</span> <span class="constant">M</span>=(-2,-1); <span class="function-name">dot</span>(<span class="string">"M"</span>, <span class="constant">M</span>, <span class="constant">W</span>);

<span class="type">point</span> <span class="variable-name">Ap</span>=<span class="function-name">yscale</span>(k, <span class="constant">M</span>)*A;
<span class="function-name">dot</span>(<span class="string">"A'"</span>, Ap, -<span class="function-name">I</span>*<span class="function-name">unit</span>(A-Ap), <span class="constant">red</span>); <span class="function-name">dot</span>(<span class="string">"A"</span>, A, -<span class="function-name">I</span>*<span class="function-name">unit</span>(A-Ap));
<span class="type">point</span> <span class="variable-name">P</span>=<span class="function-name">intersectionpoint</span>(<span class="function-name">line</span>(A,Ap), <span class="function-name">line</span>(<span class="constant">M</span>,<span class="constant">M</span>+<span class="constant">E</span>));
<span class="function-name">dot</span>(<span class="string">"P"</span>, P, <span class="function-name">locate</span>(<span class="function-name">unit</span>(A-Ap))); <span class="function-name">draw</span>(<span class="constant">M</span>--P, <span class="constant">blue</span>); <span class="function-name">draw</span>(P--Ap, <span class="constant">red</span>);
<span class="function-name">distance</span>(<span class="string">"$k\times PA$"</span>, P, Ap, 3<span class="constant">mm</span>, <span class="constant">grey</span>);

